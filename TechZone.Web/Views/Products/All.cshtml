@using PagedList.Mvc
@model IEnumerable<TechZone.Models.ViewModels.Products.GeneralProductPageViewModel>
@{
    ViewBag.Title = "All";
}

@section styles 
{ 
    <link rel="stylesheet" href="/Content/CustomSiteCss/ProductStyles.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
}

@{ int counter = 0; }

<div class="container">
    @Html.Partial("_SearchPanelPartial")
    @foreach (var product in Model)
    {
        if (counter % 4 == 0)
        {
            @:<div class="row">
        }
        @Html.Partial("_GeneralProductViewPartial", product)
        if (counter % 4 == 3 || counter == Model.Count() - 1)
        {
            @:</div>
        }
    counter++;
}
</div>
<div class="text-center">
    @Html.PagedListPager((PagedList.IPagedList)Model, page => Url.Action("All", new { page }))
</div>

@section scripts
{
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="/Scripts/CustomScripts/ProductPages.js"></script>
    <script>
        function loadProductFilters(selectObject) {
            if (selectObject.value == 'hardDrive') {
                $('#product-search-form').attr("action", "/Products/FilterHardDrives");
            }
            if (selectObject.value == 'graphicCard') {
                $('#product-search-form').attr("action", "/Products/FilterGraphicCards");
            }
            if (selectObject.value == 'processor') {
                $('#product-search-form').attr("action", "/Admin/Control/AddProcessor");
            }
            $('#particular-product-filter').load('/Admin/Control/ProductSpecs', { productType: selectObject.value });
        }
    </script>
}